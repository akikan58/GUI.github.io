<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>作業履歴</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="work-history.css">
</head>
<body>
    <div class="header-band">
        <div class="date-time-display">作業履歴</div>
    </div>

    <div class="main-content-wrapper">
        <div class="history-card bg-white rounded-xl shadow-lg overflow-hidden">
            <div class="p-6 bg-gray-200">
                <h1 class="text-3xl font-bold text-center text-gray-800">過去の作業履歴</h1>
            </div>
            
            <div class="p-6 flex-grow overflow-y-auto">
                <div id="history-table-container">
                    </div>
            </div>
        </div>
        
        <div class="back-to-home-button-container">
            <button id="back-to-home-button" class="interactive-button back-button">
                <i class="fas fa-arrow-left"></i>
                <span>ホームに戻る</span>
            </button>
        </div>
    </div>

    <script>
        // ★★★ ダミーデータとレンダリングのためのJavaScript ★★★

        document.addEventListener('DOMContentLoaded', () => {
            const historyTableContainer = document.getElementById('history-table-container');
            const backToHomeButton = document.getElementById('back-to-home-button');

            // 1. ダミーデータ
            const DUMMY_HISTORY_DATA = [
                { id: 1, date: '2023/11/24', taskName: 'A製品の製函', boxCount: 50, startTime: '10:00', endTime: '10:04', duration: '00:04:00' },
                { id: 2, date: '2023/11/24', taskName: 'B製品の梱包', boxCount: 15, startTime: '10:10', endTime: '10:12', duration: '00:02:00' },
                { id: 3, date: '2023/11/23', taskName: 'C製品の仕分け', boxCount: 120, startTime: '15:30', endTime: '15:42', duration: '00:12:00' },
                { id: 4, date: '2023/11/23', taskName: 'A製品の製函 (夜勤)', boxCount: 30, startTime: '20:00', endTime: '20:03', duration: '00:03:00' },
                { id: 5, date: '2023/11/22', taskName: 'B製品の梱包', boxCount: 80, startTime: '09:00', endTime: '09:08', duration: '00:08:00' },
            ];

            // 2. テーブルレンダリング関数
            function renderHistoryTable(data) {
                if (data.length === 0) {
                    historyTableContainer.innerHTML = '<p class="text-center text-gray-500 py-10">履歴データがありません。</p>';
                    return;
                }

                const table = document.createElement('table');
                table.classList.add('min-w-full', 'divide-y', 'divide-gray-200', 'text-sm');
                
                // ヘッダー
                table.innerHTML = `
                    <thead class="bg-gray-50 sticky top-0 z-10">
                        <tr>
                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">日付</th>
                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">タスク名</th>
                            <th class="px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">枚数</th>
                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">開始</th>
                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">終了</th>
                            <th class="px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">所要時間</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        ${data.map((item, index) => `
                            <tr class="${index % 2 === 0 ? 'bg-white' : 'bg-gray-50'} hover:bg-blue-50 transition duration-150">
                                <td class="px-3 py-3 whitespace-nowrap text-gray-900">${item.date}</td>
                                <td class="px-3 py-3 whitespace-nowrap font-medium text-gray-900">${item.taskName}</td>
                                <td class="px-3 py-3 whitespace-nowrap text-right text-blue-600 font-bold">${item.boxCount}</td>
                                <td class="px-3 py-3 whitespace-nowrap text-gray-500">${item.startTime}</td>
                                <td class="px-3 py-3 whitespace-nowrap text-gray-500">${item.endTime}</td>
                                <td class="px-3 py-3 whitespace-nowrap text-right font-semibold text-gray-700">${item.duration}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                `;

                historyTableContainer.appendChild(table);
            }

            // 初期表示
            renderHistoryTable(DUMMY_HISTORY_DATA);

            // 3. ホームに戻るボタンのイベント
            backToHomeButton.addEventListener('click', () => {
                if (typeof electronAPI !== 'undefined' && electronAPI.navigateTo) {
                    electronAPI.navigateTo('index'); // 'index' を指定して最初の画面に戻る
                }else{
                    location.href = 'index.html'; // 通常のWebブラウザフォールバック
                }
            });
        });
    </script>
</body>
</html>
